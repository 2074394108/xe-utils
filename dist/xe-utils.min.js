/*!
 * xe-utils.js v1.3.0
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.XEUtils=a())}(this,function(){var Q=window.isNaN;var at=window.isFinite;var b=Array.isArray||function(aJ){return Object.prototype.toString.call(aJ)==="[object Array]"};function f(aJ){return aJ!==null&&!Q(aJ)&&!P(aJ)}var P=Number.isInteger;function an(aJ){return typeof aJ==="function"}function aq(aJ){return typeof aJ==="boolean"}function ax(aJ){return typeof aJ==="string"}function J(aJ){return typeof aJ==="number"}function ai(aJ){return aJ?aJ.constructor===RegExp:false}function B(aJ){return typeof aJ==="object"}function y(aJ){return aJ?aJ.constructor===Object:false}function g(aJ){return aJ?aJ.constructor===Date:false}function c(aJ){return aJ?aJ.constructor===Error:false}function ad(aJ){return aJ?aJ.constructor===TypeError:false}function j(aK){if(aK===0||!J(aK)){for(var aJ in aK){return false}return true}return false}function aG(aJ){return aJ===null}function ar(aJ){return typeof Symbol!=="undefined"&&Symbol.isSymbol?Symbol.isSymbol(aJ):(typeof aJ==="symbol")}function d(aJ){return String(aJ)==="[object Arguments]"}function Y(aJ){return aJ&&ax(aJ.nodeName)&&J(aJ.nodeType)}function aw(aJ){return aJ&&aJ.nodeType===9}function H(aJ){return aJ&&aJ===aJ.window}function aE(aJ){return typeof FormData!=="undefined"&&aJ instanceof FormData}function ac(aK){var aJ=aK?u(aK):new Date();var aL=aJ.getFullYear();return(aL%4===0)&&(aL%100!==0||aL%400===0)}function s(aJ){if(aJ===null){return""+aJ}if(ar(aJ)){return"symbol"}if(g(aJ)){return"date"}if(b(aJ)){return"array"}return typeof aJ}var A=0;function S(){return ++A}function E(aK){var aJ=0;if(ax(aK)||b(aK)){return aK.length}aH(aK,function(){aJ++});return aJ}function ah(aJ){return function(aL,aM){if(aL){if(ax(aL)||b(aL)){return aJ(aL,aM)}for(var aK in aL){if(aM===aL[aK]){return aK}}}return -1}}var k=ah(function(aL,aM){if(aL.indexOf){return aL.indexOf(aM)}for(var aK=0,aJ=aL.length;aK<aJ;aK++){if(aM===aL[aK]){return aK}}});var al=ah(function(aK,aL){if(aK.lastIndexOf){return aK.lastIndexOf(aL)}for(var aJ=aK.length-1;aJ>=0;aJ--){if(aL===aK[aJ]){return aJ}}return -1});function C(aJ,aK){return k(aJ,aK)!==-1}var M=C;var ap=Object.assign||function(aM){if(aM){for(var aL,aK=1,aJ=arguments.length;aK<aJ;aK++){aL=arguments[aK];F(arguments[aK]).forEach(function(aN){aM[aN]=aL[aN]})}}return aM};var R=ap;function U(aK){if(B(aK)){return aK}else{if(ax(aK)){try{return JSON.parse(aK)}catch(aJ){console.error(aJ)}}}return{}}function ak(aK){if(B(aK)){try{return JSON.stringify(aK)}catch(aJ){console.error(aJ)}}return aK?""+aK:""}function F(aK){var aJ=[];if(aK){if(Object.keys){return Object.keys(aK)}m(aK,function(aM,aL){aJ.push(aL)})}return aJ}function v(aK){if(Object.values){return aK?Object.values(aK):[]}var aJ=[];F(aK).forEach(function(aL){aJ.push(aK[aL])});return aJ}function az(aK){if(Object.entries){return aK?Object.entries(aK):[]}var aJ=[];F(aK).forEach(function(aL){aJ.push([aL,aK[aL]])});return aJ}function ab(aJ){return v(aJ)[0]}function N(aK){var aJ=v(aK);return aJ[aJ.length-1]}function m(aL,aM,aK){for(var aJ in aL){if(aL.hasOwnProperty(aJ)){aM.call(aK,aL[aJ],aJ,aL)}}}function aH(aK,aL,aJ){if(aK){if(b(aK)){return aK.forEach(aL,aJ)}m(aK,aL,aJ)}return aK}function T(aN,aO,aM){var aL,aK;var aJ={};if(aN){if(ax(aO)){aK=aO;aO=null}else{if(an(aO)){aO=aO.bind(aM)}else{aO=aK=null}}aH(aN,function(aQ,aP){aL=aO?aO(aQ,aP,aN):(aK?aQ[aK]:aQ);if(aJ[aL]){aJ[aL].push(aQ)}else{aJ[aL]=[aQ]}})}return aJ}function l(aL,aM,aK){var aJ={};aH(aL,function(aO,aN){aJ[aN]=aM.call(aK,aO,aN,aL)});return aJ}function q(aK){var aJ={};aH(aK,function(aM,aL){aJ[aL]=ae(aM)});return aJ}function a(aJ){return aJ.map(function(aL,aK){return ae(aL)})}function ae(aJ){return y(aJ)?q(aJ):b(aJ)?a(aJ):aJ}function w(aK,aJ){return aJ?ae(aK):ap(y(aK)?{}:[],aK)}function aF(aK){var aJ=[];if(b(aK)){aK.forEach(function(aL){if(!aJ.includes(aL)){aJ.push(aL)}})}return aJ}function aA(){var aK=[];for(var aL=0,aJ=arguments.length;aL<aJ;aL++){aK=aK.concat(arguments[aL])}return aF(aK)}function G(aJ,aL,aK){if(b(aJ)){return aJ.sort(aL?an(aL)?aL.bind(aK||this):function(aN,aM){return aN[aL]>aM[aL]?1:-1}:function(aN,aM){return aN>aM?1:-1})}return aJ}function i(aN){var aK=[];for(var aM=v(aN),aJ=aM.length-1;aJ>=0;aJ--){var aL=aJ>0?Z(0,aJ):0;aK.push(aM[aL]);aM.splice(aL,1)}return aK}function aB(aL,aK){var aJ=i(aL);if(arguments.length===1){return aJ[0]}if(aK<aJ.length){aJ.length=aK||0}return aJ}function x(aL,aM,aK){if(aL){if(b(aL)){return aL.some(aM,aK)}else{for(var aJ in aL){if(aL.hasOwnProperty(aJ)){if(aM.call(aK,aL[aJ],aJ,aL)){return true}}}}}return false}function ag(aL,aM,aK){if(aL){if(b(aL)){return aL.every(aM,aK)}else{for(var aJ in aL){if(aL.hasOwnProperty(aJ)){if(!aM.call(aK,aL[aJ],aJ,aL)){return false}}}}}return true}function z(aL,aM,aK){if(aL){if(b(aL)){return aL.filter(aM,aK)}else{var aJ={};aH(aL,function(aO,aN){if(aM.call(aK,aO,aN,aL)){aJ[aN]=aO}});return aJ}}return[]}function aI(aL,aM,aK){if(aL){if(b(aL)){return aL.find(aM,aK)}else{for(var aJ in aL){if(aL.hasOwnProperty(aJ)){if(aM.call(aK,aL[aJ],aJ,aL)){return aL[aJ]}}}}}}function r(aL,aM,aK){var aJ=[];if(aL){if(b(aL)){return aL.map(aM,aK)}else{aH(aL,function(){aJ.push(aM.call(aK,arguments))})}}return aJ}var au=Date.now||function(){return new Date().getTime()};function u(aL,aK){if(aL){if(g(aL)){return aL}if(!Q(aL)){return new Date(aL)}if(ax(aL)){aK=aK||"yyyy-MM-dd HH:mm:ss.SSS";var aJ=[];[{rules:[["yyyy",4],["yyy",3],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]}].forEach(function(aQ){for(var aN,aP,aO=0,aR=aQ.rules,aM=aR.length;aO<aM;aO++){aN=aR[aO];aP=aK.indexOf(aN[0]);if(aP>-1){aJ.push(parseFloat(aL.substring(aP,aP+aN[1])||0)+(aQ.offset||0));break}else{if(aO===aM-1){aJ.push(0)}}}});return new Date(aJ[0],aJ[1],aJ[2],aJ[3],aJ[4],aJ[5],aJ[6])}}return"Invalid Date"}function aa(aL,aN){aL=u(aL);if(g(aL)){var aK=aN||"yyyy-MM-dd HH:mm:ss";var aM=["日","一","二","三","四","五","六"];var aJ={"q+":Math.floor((aL.getMonth()+3)/3),"M+":aL.getMonth()+1,"E+":aL.getDay(),"d+":aL.getDate(),"H+":aL.getHours(),"m+":aL.getMinutes(),"s+":aL.getSeconds(),"S":aL.getMilliseconds()};if(/(y+)/.test(aK)){aK=aK.replace(RegExp.$1,(""+aL.getFullYear()).substr(4-RegExp.$1.length))}F(aJ).forEach(function(aO){if(new RegExp("("+aO+")").test(aK)){var aP=""+aJ[aO];aK=aK.replace(RegExp.$1,(aO==="q+"||aO==="E+")?aM[aP]:(RegExp.$1.length===1?aP:("00"+aP).substr(aP.length)))}});return aK}return aL}function O(aL,aQ,aP){var aK=u(aL);var aM=aQ&&!Q(aQ)?aQ:0;var aR=aK.getHours();var aW=aK.getMinutes();var aS=aK.getSeconds();var aJ=aK.getMilliseconds();if(aP==="first"){var aU=aK.getFullYear();var aN=aK.getMonth();if((aN+=aM)<0){return new Date(aU-Math.ceil((aN=Math.abs(aN))/12),12-(aN%12||1),1,aR,aW,aS,aJ)}return new Date(aU+Math.floor(aN/12),aN%12,1,aR,aW,aS,aJ)}else{if(aP==="last"){return new Date(O(aK,aM+1,"first").getTime()-86400000)}}var aT=aK.getDate();var aV=O(aK,aM,"first");var aO=aV.getMonth();aV.setDate(aT);while(aO<aV.getMonth()){aV.setDate(--aT)}return aV}function aD(aK,aL,aP){var aN=Number(/^[0-7]$/.test(aP)?aP:0);var aJ=u(aK);var aM=aJ.getDay();var aO=aJ.getTime();var aQ=aO+((aN===0?7:aN)-(aM===0?7:aM))*86400000;if(aL&&!Q(aL)){aQ+=aL*604800000}return new Date(aQ)}function ao(aK,aJ){return new Date(u(aK).getTime()+(aJ&&!Q(aJ)?aJ*86400000:0))}function p(aJ,aK){return Math.floor((O(aJ,aK,"last").getTime()-O(aJ,aK,"first").getTime())/86400000)+1}function D(aK,aL,aQ){var aT={};var aJ=u(aK).getTime();var aM=aL?u(aL).getTime():new Date();if(aJ<aM){var aS;var aR=aM-aJ;var aP=aQ&&aQ.length>0?aQ:[["yyyy",31536000000],["MM",2592000000],["dd",86400000],["HH",3600000],["mm",60000],["ss",1000],["S",0]];for(var aO=0,aN=aP.length;aO<aN;aO++){aS=aP[aO];if(aR>=aS[1]){if(aO===aN-1){if(aR){aT[aS[0]]=aR}}else{aT[aS[0]]=Math.floor(aR/aS[1]);aR-=aT[aS[0]]*aS[1]}}}}return aT}var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var W={};F(t).forEach(function(aJ){W[t[aJ]]=aJ});function e(aK){var aJ=new RegExp("(?:"+F(aK).join("|")+")","g");return function(aL){return String(aL||"").replace(aJ,function(aM){return aK[aM]})}}var av=e(t);var ay=e(W);function Z(aK,aJ){return aK>=aJ?aK:((aK=aK>>0)+Math.round(Math.random()*((aJ||9)-aK)))}function o(aJ,aK){return(an(aK)?G(r(aJ,aK,this)):G(aJ,aK))}function aC(){return o.apply(this,arguments)[0]}function n(){return o.apply(this,arguments).reverse()[0]}var I=document.body||document.documentElement;function aj(){var aJ={};["webkit","khtml","moz","ms","o"].forEach(function(aK){aJ["-"+aK]=!!I[aK+"MatchesSelector"]});return aJ}function L(aL,aN,aK){var aM=[];if(b(aL)){aM=aL}else{if(arguments.length>1){aM=[ap({name:aL,value:aN},aK)]}else{if(B(aL)){aM=[aL]}}}if(aM.length>0){aM.forEach(function(aQ){var aP=ap({},aQ);var aO=[];if(aP.name){aO.push(encodeURIComponent(aP.name)+"="+encodeURIComponent(JSON.stringify(aP.value)));if(aP.expires!==undefined){aP.expires=new Date(Date.now()+parseFloat(aP.expires)*86400000).toUTCString()}["expires","path","domain","secure"].forEach(function(aR){if(aP[aR]!==undefined){aO.push(aR+"="+aP[aR])}})}document.cookie=aO.join("; ")})}else{var aJ={};document.cookie.split("; ").forEach(function(aP){var aO=aP.split("=");aJ[decodeURIComponent(aO[0])]=decodeURIComponent(aO[1]||"")});return arguments.length===1?aJ[aL]:aJ}}var af=location;function K(){return(af.hash.split("#")[1]||"").split("?")[0]||""}function X(aK){var aJ={};var aL=aK.split("?")[1]||"";if(aL){aL.split("&").forEach(function(aN){var aM=aN.split("=");aJ[decodeURIComponent(aM[0])]=decodeURIComponent(aM[1]||"")})}return aJ}function h(){return{port:af.port,href:af.href,host:af.host,hostname:af.hostname,protocol:af.protocol,origin:af.origin,hash:K(),query:X(af.hash),params:X(af.search)}}function V(){}function am(aJ){return Object.assign(V,aJ)}am({isNaN:Q,isFinite:at,isArray:b,isFloat:f,isInteger:P,isFunction:an,isBoolean:aq,isString:ax,isNumber:J,isRegExp:ai,isObject:B,isPlainObject:y,isDate:g,isError:c,isTypeError:ad,isEmpty:j,isNull:aG,isSymbol:ar,isArguments:d,isElement:Y,isDocument:aw,isWindow:H,isFormData:aE,isLeapYear:ac,getType:s,uniqueId:S,size:E,indexOf:k,lastIndexOf:al,includes:C,contains:M,assign:ap,extend:R,stringToJson:U,jsonToString:ak,keys:F,values:v,entries:az,first:ab,last:N,each:aH,groupBy:T,mapObject:l,clone:w,uniq:aF,union:aA,sort:G,shuffle:i,sample:aB,some:x,every:ag,filter:z,find:aI,map:r,now:au,stringToDate:u,dateToString:aa,getWhatMonth:O,getWhatWeek:aD,getWhatDay:ao,getDaysOfMonth:p,getDateDiff:D,escape:av,unescape:ay,random:Z,min:aC,max:n});am({browse:aj,cookie:L,locat:h});V.mixin=am;return V}));