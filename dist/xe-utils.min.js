/**
 * xe-utils.js v1.5.14
 * (c) 2017-2018 Xu Liangzhan
 * ISC License.
 * @preserve
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):n.XEUtils=t()}(this,function(){"use strict";function n(){}function t(n){var t=[];return $.isArray(n)&&$.arrayEach(n,function(n){t.includes(n)||t.push(n)}),t}function r(){for(var n=[],r=0,e=arguments.length;r<e;r++)n=n.concat(arguments[r]);return t(n)}function e(n,t,r){return $.isArray(n)?n.sort(t?$.isFunction(t)?t.bind(r||this):function(n,r){return n[t]>r[t]?1:-1}:function(n,t){return n>t?1:-1}):n}function i(n){for(var t=[],r=$.objectValues(n),e=r.length-1;e>=0;e--){var i=e>0?on.getRandom(0,e):0;t.push(r[i]),r.splice(i,1)}return t}function o(n,t){var r=i(n);return 1===arguments.length?r[0]:(t<r.length&&(r.length=t||0),r)}function u(n,t,r){if(n){if($.isArray(n))return n.some(t,r||this);for(var e in n)if(n.hasOwnProperty(e)&&t.call(r||this,n[e],e,n))return!0}return!1}function a(n,t,r){if(n){if($.isArray(n))return n.every(t,r||this);for(var e in n)if(n.hasOwnProperty(e)&&!t.call(r||this,n[e],e,n))return!1}return!0}function s(n,t,r){if(n){if($.isArray(n))return n.filter(t,r||this);var e={};return $.each(n,function(i,o){t.call(r||this,i,o,n)&&(e[o]=i)}),e}return[]}function c(n,t,r){if(n){if($.isArray(n))return n.find(t,r||this);for(var e in n)if(n.hasOwnProperty(e)&&t.call(r||this,n[e],e,n))return n[e]}}function f(n,t,r){var e=[];if(n){if($.isArray(n))return n.map(t,r||this);$.each(n,function(){e.push(t.apply(r||this,arguments))})}return e}function l(n){return"function"==typeof n}function y(n){return"string"==typeof n}function h(n){return"number"==typeof n}function g(n){return"object"==typeof n}function p(n){return!!n&&n.constructor===Object}function m(n){return"[object Date]"===P.call(n)}function d(n){return"undefined"!=typeof Symbol&&Symbol.isSymbol?Symbol.isSymbol(n):"symbol"==typeof n}function v(n){return function(t,r){if(t){if(y(t)||Y(t))return n(t,r);for(var e in t)if(r===t[e])return e}return-1}}function b(n,t){return-1!==L(n,t)}function S(n){var t=[];if(n){if(Object.keys)return Object.keys(n);w(n,function(n,r){t.push(r)})}return t}function j(n){if(Object.values)return n?Object.values(n):[];var t=[];return E(S(n),function(r){t.push(n[r])}),t}function M(n){if(Object.entries)return n?Object.entries(n):[];var t=[];return E(S(n),function(r){t.push([r,n[r]])}),t}function D(n){return j(n)[0]}function O(n){var t=j(n);return t[t.length-1]}function w(n,t,r){for(var e in n)n.hasOwnProperty(e)&&t.call(r||this,n[e],e,n)}function E(n,t,r){for(var e=0,i=n.length||0;e<i;e++)t.call(r||this,n[e],e,n)}function x(n,t,r){return n?Y(n)?l(n.forEach)?n.forEach(t,r||this):E(n,t,r||this):w(n,t,r||this):n}function T(n){return p(n)?function(n){var t={};return x(n,function(n,r){t[r]=T(n)}),t}(n):Y(n)?function(n){return C.arrayMap(n,function(n,t){return T(n)})}(n):n}function A(n,t,r){var e=[];if($.isArray(n)?e=n:arguments.length>1?e=[$.objectAssign({name:n,value:t},r)]:$.isObject(n)&&(e=[n]),!(e.length>0)){var i={};return document.cookie&&$.arrayEach(document.cookie.split("; "),function(n){var t=n.indexOf("=");i[decodeURIComponent(n.substring(0,t))]=decodeURIComponent(n.substring(t+1)||"")}),1===arguments.length?i[n]:i}$.arrayEach(e,function(n){var t=$.objectAssign({},n),r=[];t.name&&(r.push(encodeURIComponent(t.name)+"="+encodeURIComponent($.isObject(t.value)?JSON.stringify(t.value):t.value)),void 0!==t.expires&&(t.expires=new Date((new Date).getTime()+864e5*parseFloat(t.expires)).toUTCString()),$.arrayEach(["expires","path","domain","secure"],function(n){void 0!==t[n]&&r.push(n+"="+t[n])})),document.cookie=r.join("; ")})}function F(n,t){if(n){if($.isDate(n))return n;if(!J(n))return new Date(n);if($.isString(n)){t=t||"yyyy-MM-dd HH:mm:ss.SSS";var r=[];return $.arrayEach(_,function(e){for(var i,o,u=0,a=e.rules,s=a.length;u<s;u++){if(i=a[u],(o=t.indexOf(i[0]))>-1){r.push(parseFloat(n.substring(o,o+i[1])||0)+(e.offset||0));break}u===s-1&&r.push(0)}}),new Date(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}}return"Invalid Date"}function I(n,t,r){var e=F(n),i=t&&!J(t)?t:0,o=e.getHours(),u=e.getMinutes(),a=e.getSeconds(),s=e.getMilliseconds();if("first"===r){var c=e.getFullYear(),f=e.getMonth();return(f+=i)<0?new Date(c-Math.ceil((f=Math.abs(f))/12),12-(f%12||1),1,o,u,a,s):new Date(c+Math.floor(f/12),f%12,1,o,u,a,s)}if("last"===r)return new Date(I(e,i+1,"first").getTime()-864e5);var l=e.getDate(),y=I(e,i,"first"),h=y.getMonth();for(y.setDate(l);h<y.getMonth();)y.setDate(--l);return y}function R(n){var t={},r=n.split("?")[1]||"";return r&&$.arrayEach(r.split("&"),function(n){var r=n.split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}),t}function H(){return rn.origin||rn.protocol+"//"+rn.host}function N(n,t){return $.isFunction(t)?C.arraySort(C.arrayMap(n,t,this)):C.arraySort(n,t)}function k(){return N.apply(this,arguments)[0]}function U(){return N.apply(this,arguments).reverse()[0]}function q(n){var t=new RegExp("(?:"+$.objectKeys(n).join("|")+")","g");return function(r){return String(r||"").replace(t,function(t){return n[t]})}}n.version="1.5.14",n.mixin=function(t){return Object.assign(n,t)};var C={arrayUniq:t,uniq:t,arrayUnion:r,union:r,arraySort:e,sort:e,arrayShuffle:i,shuffle:i,arraySample:o,sample:o,arraySome:u,some:u,arrayEvery:a,every:a,arrayFilter:s,filter:s,arrayFind:c,find:c,arrayMap:f,map:f},P=Object.prototype.toString,J=window.isNaN,W=window.isFinite,Y=Array.isArray||function(n){return"[object Array]"===P.call(n)},B=Number.isInteger,K=0,L=v(function(n,t){if(n.indexOf)return n.indexOf(t);for(var r=0,e=n.length;r<e;r++)if(t===n[r])return r}),z=v(function(n,t){if(n.lastIndexOf)return n.lastIndexOf(t);for(var r=n.length-1;r>=0;r--)if(t===n[r])return r;return-1}),V=b,X=Object.assign||function(n){if(n)for(var t,r=1,e=arguments.length;r<e;r++)t=arguments[r],E(S(arguments[r]),function(r){n[r]=t[r]});return n},$={isNaN:J,isFinite:W,isFloat:function(n){return null!==n&&!J(n)&&!B(n)},isInteger:B,isFunction:l,isBoolean:function(n){return"boolean"==typeof n},isString:y,isRegExp:function(n){return"[object RegExp]"===P.call(n)},isObject:g,isPlainObject:p,isDate:m,isError:function(n){return"[object Error]"===P.call(n)},isTypeError:function(n){return!!n&&n.constructor===TypeError},isEmpty:function(n){if(0===n||!h(n)){for(var t in n)return!1;return!0}return!1},isNull:function(n){return null===n},isSymbol:d,isArguments:function(n){return"[object Arguments]"===P.call(n)},isElement:function(n){return n&&y(n.nodeName)&&h(n.nodeType)},isDocument:function(n){return n&&9===n.nodeType},isWindow:function(n){return n&&n===n.window},isFormData:function(n){return"undefined"!=typeof FormData&&n instanceof FormData},isLeapYear:function(n){var t=(n?tn.stringToDate(n):new Date).getFullYear();return t%4==0&&(t%100!=0||t%400==0)},getType:function(n){return null===n?""+n:d(n)?"symbol":m(n)?"date":Y(n)?"array":typeof n},uniqueId:function(){return++K},getSize:function(n){var t=0;return y(n)||Y(n)?n.length:(x(n,function(){t++}),t)},lastIndexOf:z,includes:b,contains:V,objectAssign:X,assign:X,extend:X,stringToJson:function(n){if(g(n))return n;if(y(n))try{return JSON.parse(n)}catch(n){console.error(n)}return{}},jsonToString:function(n){if(g(n))try{return JSON.stringify(n)}catch(n){console.error(n)}return n?""+n:""},objectKeys:S,keys:S,objectValues:j,values:j,objectEntries:M,entries:M,arrayFirst:D,first:D,arrayLast:O,last:O,objectEach:w,arrayEach:E,each:x,groupBy:function(n,t,r){var e,i,o={};return n&&(y(t)?(i=t,t=null):t=l(t)?t.bind(r||this):i=null,x(n,function(r,u){e=t?t(r,u,n):i?r[i]:r,o[e]?o[e].push(r):o[e]=[r]})),o},objectMap:function(n,t,r){var e={};return x(n,function(i,o){e[o]=t.call(r||this,i,o,n)}),e},clone:function(n,t){return n?t?T(n):X(p(n)?{}:[],n):n}},G={browse:function(){var n={},t=document.body||document.documentElement;return $.arrayEach(["webkit","khtml","moz","ms","o"],function(r){n["-"+r]=!!t[r+"MatchesSelector"]}),n}};$.objectAssign(A,{setItem:function(n,t){A(n,t)},getItem:function(n){return A(n)},removeItem:function(n){A(n,null,{expires:-1})},getJSON:function(){return A()}});var Q={cookie:A},Z=Date.now||function(){return(new Date).getTime()},_=[{rules:[["yyyy",4],["yyy",3],["yy",2]]},{rules:[["MM",2],["M",1]],offset:-1},{rules:[["dd",2],["d",1]]},{rules:[["HH",2],["H",1]]},{rules:[["mm",2],["m",1]]},{rules:[["ss",2],["s",1]]},{rules:[["SSS",3],["SS",2],["S",1]]}],nn=[["yyyy",31536e6],["MM",2592e6],["dd",864e5],["HH",36e5],["mm",6e4],["ss",1e3],["S",0]],tn={timestamp:Z,now:Z,stringToDate:F,dateToString:function(n,t){if(n){if(n=F(n),$.isDate(n)){var r=["日","一","二","三","四","五","六"],e={"q+":Math.floor((n.getMonth()+3)/3),"M+":n.getMonth()+1,"E+":n.getDay(),"d+":n.getDate(),"H+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),S:n.getMilliseconds()},i=String(t||"yyyy-MM-dd HH:mm:ss").replace(/(y+)/,function(t){return(""+n.getFullYear()).substr(4-t.length)});for(var o in e)if(e.hasOwnProperty(o)){var u=""+e[o];i=i.replace(new RegExp("("+o+")"),function(n){return"q+"===o||"E+"===o?r[u]:1===n.length?u:("00"+u).substr(u.length)})}return i}return n}return""},getWhatMonth:I,getWhatWeek:function(n,t,r){var e=Number(/^[0-7]$/.test(r)?r:0),i=F(n),o=i.getDay(),u=i.getTime()+864e5*((0===e?7:e)-(0===o?7:o));return t&&!J(t)&&(u+=6048e5*t),new Date(u)},getWhatDay:function(n,t){return new Date(F(n).getTime()+(t&&!J(t)?864e5*t:0))},getDaysOfMonth:function(n,t){return Math.floor((I(n,t,"last").getTime()-I(n,t,"first").getTime())/864e5)+1},getDateDiff:function(n,t,r){var e={},i=F(n).getTime(),o=t?F(t).getTime():new Date;if(i<o)for(var u,a=o-i,s=r&&r.length>0?r:nn,c=0,f=s.length;c<f;c++)a>=(u=s[c])[1]&&(c===f-1?a&&(e[u[0]]=a):(e[u[0]]=Math.floor(a/u[1]),a-=e[u[0]]*u[1]));return e}},rn=location,en={getBaseURL:function(){var n=rn.pathname,t=$.lastIndexOf(n,"/")+1;return H()+(t===n.length?n:n.substring(0,t))},locat:function(){return{port:rn.port,href:rn.href,host:rn.host,hostname:rn.hostname,protocol:rn.protocol,origin:H(),hash:(rn.hash.split("#")[1]||"").split("?")[0]||"",query:R(rn.hash),params:R(rn.search)}}},on={getRandom:function(n,t){return n>=t?n:(n>>=0)+Math.round(Math.random()*((t||9)-n))},arrayMin:k,min:k,arrayMax:U,max:U},un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},an={};$.arrayEach($.objectKeys(un),function(n){an[un[n]]=n});var sn={escape:q(un),unescape:q(an)},cn={};return $.objectAssign(cn,C,$,G,Q,tn,en,on,sn),n.mixin(cn),n});